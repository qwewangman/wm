<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>北京舞蹈学院学生档案管理系统</title>
    <link rel="stylesheet" type="text/css" href="__STATIC__/css/records.css">
    <link rel="stylesheet" type="text/css" href="__STATIC__/css/details.css">
    <link rel="stylesheet" type="text/css" href="__STATIC__/font/iconfont.css">
    <link rel="stylesheet" type="text/css" href="__STATIC__/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="__STATIC__/css/style.css">

    <script src="__STATIC__/js/jquery-2.1.1.min.js"></script>
    <script src="__STATIC__/layui/layui.js" charset="utf-8"></script>
    <script src="__STATIC__/js/index.js"></script>

</head>
<style>
    .fl_right {
        float: right;
    }
    .back {
        width: 110px;
        height: 34px;
        border: solid 1px #666666;
        line-height: 34px;
        text-align: center;
        margin-top: 20px;
        color: #333;
    }
</style>
<body>
<div class="hederBox">
    <div class="fl_left logo">北京舞蹈学院学生档案管理系统</div>
    <div class="fl_right">
        <div class="fl_left user">管理员</div>
        <a href="{:url('/login_out')}"  style="color: white"><div class="fl_right signOut">退出</div></a>
        <div class="clear"></div>
    </div>
    <div class="clear"></div>
</div>
<div class="contetnBox">

    {include file='layout'}

    <div class="rightBox fl_right">
        <div class="titleBox">
            <div class="title fl_left">立卷</div>
            <a href="{:url('/ajgl')}"><div class="fl_right back">返回</div></a>
            <div class="clear"></div>
        </div>
        <!--<div class="details">-->

            <div class="newRightBox">
                <div class="layui-input-block">
                </div>
                <div style="width: 60% ; margin: 0 auto">
            <!------------------------------------------------------------------------------------------------------------------->
                <div class="layui-tab">
                    <ul class="layui-tab-title">
                        <li class="layui-this">本科生立卷</li>
                        <li>研究生立卷</li>
                    </ul>
                <div class="layui-tab-content">

                <div class="layui-tab-item layui-show">
                    <form class="layui-form" action="{:url('/lj_add')}" method="post" enctype="multipart/form-data">
                    <div class="layui-form-item">
                        <label class="layui-form-label">姓名</label>
                        <div class="layui-input-block">
                            <input type="text" name="user_name" lay-verify="username" autocomplete="off" placeholder="请输入姓名" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">性别</label>
                        <div class="layui-input-block">
                            <input type="radio" name="sex" value="0" title="男" checked="">
                            <input type="radio" name="sex" value="1" title="女">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">手机号</label>
                        <div class="layui-input-inline">
                            <input type="text" name="phone[]" lay-verify="required|phone" placeholder="请输入电话号" autocomplete="off" class="layui-input">
                            <div id="box" style="padding-top: 5px"></div>
                        </div>
                        <div  class="layui-input-inline">
                            <span class="layui-btn layui-btn-sm" id="add" style="padding-bottom: 35px">+</span>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">验证身份证</label>
                        <div class="layui-input-block">
                            <input type="text" name="card" lay-verify="identity" placeholder="请输入身份证号" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <!--<div class="layui-form-item">
                            <label class="layui-form-label">有效日期 <p style="font-size: 12px">(身份证)</p></label>
                            <div class="layui-input-inline">
                                <input type="text" name="card_create" id="b_date" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
                            </div>
                            <div class="layui-form-mid">-</div>
                            <div class="layui-input-inline">
                                <input type="text" name="card_end" id="b_date1" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
                            </div>
                    </div>-->
                    <div class="layui-form-item">
                        <label class="layui-form-label">院系专业</label>
                        <div class="layui-input-inline">
                            <select name="courtyard" lay-filter="yx1">
                                <option value="" selected>请选择院系</option>
                                {foreach name='departlist' item='v'}
                                <option value="{$v.id}" >{$v.d_name}</option>
                                {/foreach}
                            </select>
                        </div>
                        <div class="layui-input-inline">
                            <select name="major"  id="zy1">
                                <option value="">请选专业</option>
                            </select>
                        </div>
                        <div class="layui-form-mid layui-word-aux"></div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">案卷状态</label>
                        <div class="layui-input-inline">
                            <select name="status" lay-filter="type">
                                <option value="" selected="selected">请选择</option>
                                <option value="0">未收取</option>
                                <option value="1">在档</option>
                                <option value="3">退档</option>
                            </select>
                        </div>
                        <div class="layui-input-inline">
                            <select name="infile_type" id="infile_type">
                                <option value="" selected="selected">选择在档状态</option>
                            </select>
                        </div>
                    </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">学历</label>
                            <div class="layui-input-inline">
                                <select name="education" lay-filter="education" lay-verify="education">
                                    <option value="" selected>请选择学历</option>
                                    <option value="1" >本科生</option>
                                    <option value="2" >研究生</option>
                                </select>
                            </div>
                            <label class="layui-form-label">卷号</label>
                            <div class="layui-input-inline">
                                <input type="text" name="file_number" lay-verify="" autocomplete="off" placeholder="请先选择学历" class="layui-input" id="file_number">
                            </div>
                        </div>
                        <div class="layui-form-item">

                            <label class="layui-form-label">学号</label>
                            <div class="layui-input-inline">
                                <input type="text" name="sc_number" lay-verify="" autocomplete="off" placeholder="请输入学号" class="layui-input">
                            </div>
                            <label class="layui-form-label">录取类别</label>
                            <div class="layui-input-inline">
                                <select name="student_type" lay-filter="type" lay-verify="">
                                    <option value="" selected>请选择录取类别</option>
                                    <option value="1" >舞蹈</option>
                                    <option value="2" >舞蹈学</option>
                                    <option value="3" >学术学位</option>
                                    <option value="4" >专业学位</option>
                                </select>
                            </div>
                            <div class="layui-form-mid layui-word-aux"></div>
                        </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">年级</label>
                        <div class="layui-input-inline">
                            <select id="sel1" name="grade" lay-verify="grade" autocomplete="off" placeholder="请输入年级" class="layui-input">
                                <option value="" selected="selected">请选择</option>
                            </select>
                        </div>
                        <label class="layui-form-label">班级</label>
                        <div class="layui-input-inline">
                            <input type="text" name="class" lay-verify="" autocomplete="off" placeholder="请输入班级" class="layui-input">
                        </div>

                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">交档方式</label>
                        <div class="layui-input-inline">
                            <select name="filing_type" lay-filter="xueli" lay-verify="education">
                                <option value="" selected>请选择交档方式</option>
                                <option value="1" >工作交接</option>
                                <option value="2" >未接收（预登记）</option>
                                <option value="3" >自带</option>
                            </select>
                        </div>
                        <label class="layui-form-label">导师</label>
                        <div class="layui-input-inline">
                            <input type="text" name="teacher" lay-verify="" autocomplete="off" placeholder="请输入导师" class="layui-input">
                        </div>
                    </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">何因交档</label>
                            <div class="layui-input-inline">
                                <select name="filing_reason" lay-verify="grade" autocomplete="off" placeholder="请输入年级" class="layui-input">
                                    <option value="" selected="selected">请选择</option>
                                    <option value="1">入学</option>
                                    <option value="2">工作交接</option>
                                </select>
                            </div>
                            <label class="layui-form-label">交档人</label>
                            <div class="layui-input-inline">
                                <input type="text" name="filing_people" lay-verify="" autocomplete="off" placeholder="请输入班级" class="layui-input">
                            </div>

                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">国籍</label>
                            <div class="layui-input-inline">
                                <input type="text" name="country" lay-verify="" autocomplete="off" placeholder="请输入班级" class="layui-input">
                            </div>
                            <label class="layui-form-label">民族</label>
                            <div class="layui-input-inline">
                                <input type="text" name="nation" lay-verify="" autocomplete="off" placeholder="请输入班级" class="layui-input">
                            </div>
                        </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">图片上传</label>
                        <div class="layui-input-inline">
                            <input type="file" name="files" lay-verify="" autocomplete="off" placeholder="请输入导师">
                        </div>

                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">家庭住址</label>
                        <div class="layui-input-block">
                            <input type="text" name="stu_address" lay-verify="" autocomplete="off" placeholder="请输入家庭住址" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item layui-form-text">
                        <label class="layui-form-label">备注</label>
                        <div class="layui-input-block">
                            <textarea placeholder="请输入内容" class="layui-textarea" name="content"></textarea>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
                            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                        </div>
                    </div>
                </form>

<!--<script src="__STATIC__/js/jquery-2.1.1.min.js"></script>-->

<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
    $("#add").click(function(){
        var str='<tr><td style="padding-top: 5px"><input type="text" name="phone[]" lay-verify="required|phone" placeholder="请输入电话号" autocomplete="off" class="layui-input"></td><td><span class="del layui-btn layui-btn-sm" style="margin-left: 5px">-</span></td></tr>';
        $("#box").parent().append(str);
    })

    $(document).on('click','.del',function (){
        $(this).parent().parent().remove();
    });
    /*$("#file_number").click(function () {
        var res = $(this).val();
        if (res == ''){
            alert("请先选择学历");
            return false;
        }
    });*/
    /*layui.use(['form', 'laydate','upload'], function(){
        var form = layui.form;
        form.on('select(education)', function(data){
            var id = data.value;
            var obj = $("#file_number");
            if (id == 1){
                obj.val('B');
                obj.removeClass('layui-btn-disabled');
            }else{
                obj.val('Y');
                obj.removeClass('layui-btn-disabled');
            }
        });
    });*/
</script>
<script>
        var sel = document.getElementById ('sel1');
        for ( var i = 2018; i >= 1954; i--)
        {
            var option = document.createElement ('option');
            option.value = i;
            var txt = document.createTextNode (i + '级');
            option.appendChild (txt);
            sel.appendChild (option);
        }
    layui.use(['form', 'laydate','upload'], function(){
        var form = layui.form;
        form.on('select(yx1)', function(data){
            var str = '<option value="0">请选专业</option>';
            var id = data.value;
            $.post("{:url('/getZy')}",{id:id},function(res){
                var length = res.length;
                for (var i=0;i<length;i++) {
                    str += '<option value="'+res[i].id+'">'+res[i].m_name+'</option>';
                }
                layui.$("#zy1").html(str);
                form.render();
            },'json');
        });
        form.on('select(type)', function(data){
            var str = '<option value="0">选择在档状态</option>';
            var id = data.value;
            if (id == 1){
                str += '<option value="1">转研究生</option><option value="2">毕业暂存</option><option value="3">村官暂存</option>';
            }
            layui.$("#infile_type").html(str);
            form.render();
        });
    });
                layui.use(['form', 'layedit', 'laydate'], function(){
                        var form = layui.form
                                ,layer = layui.layer
                                ,layedit = layui.layedit
                                ,laydate = layui.laydate;
                        //日期
                        laydate.render({
                            elem: '#b_date'
                        });
                        laydate.render({
                            elem: '#b_date1'
                        });
                        //创建一个编辑器
                        var editIndex = layedit.build('LAY_demo_editor');
                        //自定义验证规则
                        form.verify({
                            username: function(value){
                                if(value.length <= 0){
                                    return '请填写姓名';
                                }
                            },
                            education: function (value) {
                                if (value.length <= 0){
                                    return '请选择学历';
                                }
                            },
                            grade: function (value) {
                                if (value.length <= 0){
                                    return '请选择年级';
                                }
                            }
                            ,username: [/[\u4E00-\u9FA5A-Za-z]+$/,'请输入中文或英文']
                            ,pass: [/(.+){6,12}$/, '密码必须6到12位']
                            ,content: function(value){
                                layedit.sync(editIndex);
                            }
                        });
                        //监听指定开关
                        form.on('switch(switchTest)', function(data){
                            layer.msg('开关checked：'+ (this.checked ? 'true' : 'false'), {
                                offset: '6px'
                            });
                            layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
                        });
                        //监听提交
                        form.on('submit(demo1)', function(data){
//                            layer.alert(JSON.stringify(data.field), {
//                                title: '最终的提交信息'
//                            })
//                            return false;
                        });
                    });
</script>
                            </div>

                        <div  class="layui-tab-item">
                            <form class="layui-form" action="{:url('/lj_add')}" method="post">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">姓名</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="user_name" value="研究生" lay-verify="username" autocomplete="off" placeholder="请输入姓名" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">性别</label>
                                    <div class="layui-input-block">
                                        <input type="radio" name="sex" value="0" title="男" checked="">
                                        <input type="radio" name="sex" value="1" title="女">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">学号</label>
                                    <div class="layui-input-block">
                                        <input type="text" lay-verify="" autocomplete="off" class="layui-input" disabled = "true">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">手机号</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="phone" lay-verify="required|phone" placeholder="请输入手机号" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">验证身份证</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="card" lay-verify="identity" placeholder="请输入身份证号" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">有效日期 <p style="font-size: 12px">(身份证)</p></label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="card_create" id="date" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
                                    </div>
                                    <div class="layui-form-mid">-</div>
                                    <div class="layui-input-inline">
                                        <input type="text" name="card_end" id="date1" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">院系专业</label>
                                    <div class="layui-input-inline">
                                        <select name="courtyard" lay-filter="yx">
                                            <option value="" selected>请选择院系</option>
                                            {foreach name='departlist' item='v'}
                                            <option value="{$v.id}" >{$v.d_name}</option>
                                            {/foreach}
                                        </select>
                                    </div>
                                    <div class="layui-input-inline">
                                        <select name="major"  id="zy">
                                            <option value="">请选专业</option>
                                        </select>
                                    </div>
                                    <div class="layui-form-mid layui-word-aux"></div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">学历</label>
                                    <div class="layui-input-inline">
                                        <select name="education" lay-filter="xueli" lay-verify="education">
                                            <option value="" selected>请选择学历</option>
                                            <option value="1" >本科生</option>
                                            <option value="2" >研究生</option>
                                        </select>
                                    </div>
                                    <label class="layui-form-label">录取类别</label>
                                    <div class="layui-input-inline">
                                        <select name="type" lay-filter="type" lay-verify="">
                                            <option value="" selected>请选择录取类别</option>
                                            <option value="1" >舞蹈</option>
                                            <option value="2" >舞蹈学</option>
                                            <option value="3" >学术学位</option>
                                            <option value="4" >专业学位</option>
                                        </select>
                                    </div>
                                    <div class="layui-form-mid layui-word-aux"></div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">年级</label>
                                    <div class="layui-input-inline">
                                        <select id="sel" name="grade" lay-verify="grade" autocomplete="off" placeholder="请输入年级" class="layui-input">
                                            <option value="" selected="selected">请选择</option>
                                        </select>
                                    </div>
                                    <label class="layui-form-label">班级</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="class" lay-verify="" autocomplete="off" placeholder="请输入班级" class="layui-input">
                                    </div>

                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">导师</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="teacher" lay-verify="" autocomplete="off" placeholder="请输入导师" class="layui-input">
                                    </div>
                                    <!--<label class="layui-form-label">国籍</label>
                                    <div class="layui-input-inline">
                                        <input type="tel" name="country" lay-verify="" autocomplete="off" class="layui-input" placeholder="请输入国籍">
                                    </div>
                                    <label class="layui-form-label">民族</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="nation" lay-verify="" autocomplete="off" class="layui-input" placeholder="请输入民族">
                                    </div>-->
                                </div>
                                <div class="layui-form-item layui-form-text">
                                    <label class="layui-form-label">备注</label>
                                    <div class="layui-input-block">
                                        <textarea placeholder="请输入内容" class="layui-textarea" name="content"></textarea>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <button class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
                                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                                    </div>
                                </div>
                            </form>

                            <!--<script src="__STATIC__/js/jquery-2.1.1.min.js"></script>-->

                            <!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
                            <script>
                                var sel = document.getElementById ('sel');
                                for ( var i = 2018; i >= 1954; i--)
                                {
                                    var option = document.createElement ('option');
                                    option.value = i;
                                    var txt = document.createTextNode (i + '级');
                                    option.appendChild (txt);
                                    sel.appendChild (option);
                                }
                                layui.use(['form', 'laydate','upload'], function(){
                                    var form = layui.form;
                                    form.on('select(yx)', function(data){
                                        var str = '<option value="0">请选专业</option>';
                                        var id = data.value;
                                        $.post("{:url('/getZy')}",{id:id},function(res){
                                            var length = res.length;
                                            for (var i=0;i<length;i++) {
                                                str += '<option value="'+res[i].id+'">'+res[i].m_name+'</option>';
                                            }
                                            layui.$("#zy").html(str);
                                            form.render();
                                        },'json');
                                    });
                                });
                                layui.use(['form', 'layedit', 'laydate'], function(){
                                    var form = layui.form
                                        ,layer = layui.layer
                                        ,layedit = layui.layedit
                                        ,laydate = layui.laydate;
                                    //日期
                                    laydate.render({
                                        elem: '#date'
                                    });
                                    laydate.render({
                                        elem: '#date1'
                                    });
                                    //创建一个编辑器
                                    var editIndex = layedit.build('LAY_demo_editor');
                                    //自定义验证规则
                                    form.verify({
                                        username: function(value){
                                            if(value.length <= 0){
                                                return '请填写姓名';
                                            }
                                        },
                                        education: function (value) {
                                            if (value.length <= 0){
                                                return '请选择学历';
                                            }
                                        },
                                        grade: function (value) {
                                            if (value.length <= 0){
                                                return '请选择年级';
                                            }
                                        }
                                        ,username: [/[\u4E00-\u9FA5A-Za-z]+$/,'请输入中文或英文']
                                        ,pass: [/(.+){6,12}$/, '密码必须6到12位']
                                        ,content: function(value){
                                            layedit.sync(editIndex);
                                        }
                                    });
                                    //监听指定开关
                                    form.on('switch(switchTest)', function(data){
                                        layer.msg('开关checked：'+ (this.checked ? 'true' : 'false'), {
                                            offset: '6px'
                                        });
                                        layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
                                    });
                                    //监听提交
                                    form.on('submit(demo1)', function(data){
//                            layer.alert(JSON.stringify(data.field), {
//                                title: '最终的提交信息'
//                            })
//                            return false;
                                    });
                                });
                            </script>
                        </div>
                    </div>
                    </div>
                    <script>
                        window.onload = function(){
                            if(location.href.indexOf('#reloaded')==-1){
                                location.href=location.href+"#reloaded";
                                location.reload();
                            }
                        }
                        layui.use('element', function(){
                            var $ = layui.jquery
                                ,element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块

                            //触发事件
                            var active = {
                                tabAdd: function(){
                                    //新增一个Tab项
                                    element.tabAdd('demo', {
                                        title: '新选项'+ (Math.random()*1000|0) //用于演示
                                        ,content: '内容'+ (Math.random()*1000|0)
                                        ,id: new Date().getTime() //实际使用一般是规定好的id，这里以时间戳模拟下
                                    })
                                }
                                ,tabChange: function(){
                                    //切换到指定Tab项
                                    element.tabChange('demo', '22'); //切换到：用户管理
                                }
                            };
                        });
                    </script>
                </div>
            <!------------------------------------------------------------------------------------------------------------------->
            </div>
    </div>
</div>

</body>
</html>