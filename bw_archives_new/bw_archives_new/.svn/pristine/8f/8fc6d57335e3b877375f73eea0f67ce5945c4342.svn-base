<?php
/**
 * Created by PhpStorm.
 * User: 25352
 * Date: 2018/5/14
 * Time: 13:41
 */

namespace app\index\model;

use think\Model;
use think\Db;


class FilewithinModel extends Model
{
    protected $table = 'oa_file_within';

    public function fileSurplus($id){
        $file_sum = $this->where('s_id',$id)->count();
        $file_surplus = $this->where('s_id',$id)->where('status',2)->count();
        $short = $file_sum - $file_surplus;
        return $short;
    }
    public function getBorrow($file_number){
        $borrow_type = $this->where('file_number',$file_number)->where('status = 2 or status = 3')->select();
        if ($borrow_type){
            return 2;
        }else{
            return 1;
        }
    }

}