<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>设施农业温湿度控制系统</title>
    <link rel="stylesheet" type="text/css" href="__CSS__/style.css">
    <link rel="stylesheet" type="text/css" href="__STATIC__/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="__CSS__/login.css">

    <script type="text/javascript" src="__JS__/jquery-2.1.1.min.js"></script>
    <script src="__STATIC__/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="__JS__/index.js"></script>
    <style>
        .imgss>img{
            margin: 0 auto;
        }
        .yzmInput{
            /*background: url(__STATIC__/imgs/login.jpeg) left 10px center no-repeat;*/
            background-size: 14px;
        }
    </style>
</head>

<body>
<div class="loginBox">
    <div class="logo">

    </div>
    <div class="login">
        <div class="topTitle">
            <div class="name"><h2 style="font-weight: bolder">设施农业温湿度控制系统</h2></div>
        </div>

        <form action="{:url('/login')}" method="post"  name="testForm" >
            <div class="name">登录</div>
            <input type="text" value="" name="admin_name" class="loginInput" placeholder="账号" id="number">
            <input type="password" name="admin_pwd" class="loginInput" placeholder="密码" id="pass">

            <!--<input type="text" name="verifyCode" class="loginInput yzmInput" placeholder="请输入验证码">
            <div class="imgss"><img src="index.php{:captcha_src()}" onclick="this.src='index.php{:captcha_src()}?x='+Math.random();" /></div>-->

            <div class="erron"></div>
            <!--<a href="#" class="subBtn">提交</a>-->
            <input type="button" class="subBtn"   onclick="sendForm()" value="提交"/>
        </form>

    </div>
</div>
</body>
</html>
<script type="text/javascript">
    var a = 0;
    var b = 0;
    function sendForm ()
    {
        var number = $('#number').val();
       // var ret = /^[a-zA-Z][a-zA-Z0-9_]{4,15}$/;    //帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)
        var ret = /^[1][3,4,5,7,8][0-9]{9}$/;    //帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)
        if(ret.test(number)){
            a = 1;
        }
        var pass   = $('#pass').val();
       // var ret    = /^[a-zA-Z]\w{5,17}$/;            //密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)
        var ret    = /\w{5,17}$/;            //密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)
        //var ret    = /^.{6,0}$/;            //密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)
        if(ret.test(pass)){
            b = 1;
        }
        if(a == 1 && b == 1)
        {
            document.testForm.submit();
        }else{
            layui.use('layer',function () {
                var layer = layui.layer;
                layer.open({
                    title: '登录失败'
                    ,offset: ['255px']
                    ,anim: 0
                    ,content: '账号或密码格式有误'
                });
            });
        }
    }

    $("#pass").keydown(function(e) {
        if (e.keyCode == 13) {
            sendForm();
        }
    });

</script>